<%- include("../admin/header") %>
	<!--end header -->
	<!--start page wrapper -->
	<div class="page-wrapper">
		<div class="page-content">
			<!--breadcrumb-->
			<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3">
				<div class="breadcrumb-title pe-3">Tables</div>
				<div class="ps-3">
					<nav aria-label="breadcrumb">
						<ol class="breadcrumb mb-0 p-0">
							<li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a>
							</li>
							<li class="breadcrumb-item active" aria-current="page">Data Table</li>
						</ol>
					</nav>
				</div>
				<div class="ms-auto">
					<div class="btn-group">
						<button type="button" class="btn btn-primary">Settings</button>
						<button type="button"
							class="btn btn-primary split-bg-primary dropdown-toggle dropdown-toggle-split"
							data-bs-toggle="dropdown"> <span class="visually-hidden">Toggle Dropdown</span>
						</button>
						<div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-end"> <a class="dropdown-item"
								href="javascript:;">Action</a>
							<a class="dropdown-item" href="javascript:;">Another action</a>
							<a class="dropdown-item" href="javascript:;">Something else here</a>
							<div class="dropdown-divider"></div> <a class="dropdown-item" href="javascript:;">Separated
								link</a>
						</div>
					</div>
				</div>
			</div>
			<!--end breadcrumb-->


			<h6 class="mb-0 text-uppercase">DataTable Import</h6>
			<hr />
			<div class="card">
				<div class="card-body">
					<div class="table-responsive">
						<table id="example2" class="table table-striped table-bordered">
							<thead>
								<tr>
									<th>Id</th>
									<th>Image</th>
									<th>Name</th>
									<th>cat_id</th>
									<th>category</th>
									<th>price</th>
									<th>Details</th>
									<th>Featured</th>
									<th>Views</th>
									<th>Update</th>
									<th>Delete</th>
								</tr>
							</thead>
							<tbody>
								<% product.forEach(function(cat) { %>

									<tr>
										<td>
											<%=cat.id%>
										</td>
										<td>
											<img src="../../../data/uploads/<%= cat.image %> " alt=""
												style="height: 70px;width: 70px;">
										</td>
										<td>
											<%=cat.name%>
										</td>
										<td>
											<%=cat.cat_id%>
										</td>
										<% var found=false %>
											<% category.forEach(function(i) { if(i.id==cat.cat_id&&!found){a=i.name
												found=true%>
												<td>
													<%=a%>
												</td>
												<%} %>

													<% }); %>

														<td>
															<%=cat.price%>
														</td>
														<td>
															<%=cat.des%>
														</td>
														<td>
															<%=cat.pro_featured%>
														</td>
														<td>
															<a
																href="http://localhost:3200/admin/product/<%= cat.id %> ">Views</a>
														</td>
														<td>
															<a
																href="http://localhost:3200/admin/product/<%= cat.id %>/update">Update</a>
														</td>
														<td>
															<a onclick="myFun(`<%=cat.id%>`)">Delete</a>

														</td>

									</tr>
									<% }); %>


							</tbody>
							<tfoot>
								<tr>
									<th>Id</th>
									<th>Image</th>
									<th>Name</th>
									<th>cat_id</th>
									<th>category</th>
									<th>price</th>
									<th>Details</th>
									<th>Featured</th>
									<th>Views</th>
									<th>Update</th>
									<th>Delete</th>
								</tr>
							</tfoot>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!--end page wrapper -->




	<script>
		// const frm = document.getElementById("btn");
		const myFun = async (id) => {

			// e.preventDefault();
			// console.log(des);

			console.log("with in from");
			const res = await fetch(`http://localhost:3200/admin/product/${id}`, {
				method: "delete",
			})

			location.assign("http://localhost:3200/admin/product")

		}
	</script>
	<!-- Bootstrap JS -->

	<%- include("../admin/footer") %>